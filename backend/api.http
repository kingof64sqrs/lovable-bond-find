# Lovable Matrimony API Testing
# Use REST Client extension in VS Code to test these endpoints

@baseUrl = http://localhost:5000/api
@token = your_jwt_token_here

### ==========================================
### HEALTH CHECK
### ==========================================

### Health Check
GET {{baseUrl}}/health

### ==========================================
### AUTHENTICATION ENDPOINTS
### ==========================================

### 1. Register New User
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "password": "password123",
  "gender": "male",
  "profileFor": "self"
}

### 2. Login User
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "john.doe@example.com",
  "password": "password123"
}

### 3. Get Current User
GET {{baseUrl}}/auth/me
Authorization: Bearer {{token}}

### 4. Forgot Password
POST {{baseUrl}}/auth/forgot-password
Content-Type: application/json

{
  "email": "john.doe@example.com"
}

### ==========================================
### PROFILE ENDPOINTS
### ==========================================

### 5. Get My Profile
GET {{baseUrl}}/profiles/me
Authorization: Bearer {{token}}

### 6. Update My Profile
PUT {{baseUrl}}/profiles/me
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "John Doe Updated",
  "dateOfBirth": "1995-06-15",
  "phone": "+919876543210",
  "height": "5.9",
  "weight": 75,
  "religion": "Hindu",
  "caste": "Brahmin",
  "motherTongue": "Hindi",
  "maritalStatus": "never-married",
  "education": "Bachelor's",
  "educationDetails": "B.Tech Computer Science",
  "college": "IIT Delhi",
  "occupation": "Software Engineer",
  "company": "Tech Corp",
  "employedIn": "private",
  "annualIncome": "10-15 LPA",
  "country": "India",
  "state": "Maharashtra",
  "city": "Mumbai",
  "about": "Looking for a life partner who values family and career equally.",
  "hobbies": ["reading", "traveling", "cooking"],
  "familyType": "nuclear",
  "fatherName": "Father Name",
  "fatherOccupation": "Business",
  "motherName": "Mother Name",
  "motherOccupation": "Homemaker",
  "siblings": "1 Brother"
}

### 7. Get Profile by ID
GET {{baseUrl}}/profiles/65abc123def456ghi789jklm
Authorization: Bearer {{token}}

### 8. Search Profiles
POST {{baseUrl}}/profiles/search
Content-Type: application/json

{
  "gender": "female",
  "ageRange": {
    "min": 25,
    "max": 30
  },
  "religion": ["Hindu", "Christian"],
  "city": "Mumbai",
  "education": ["Bachelor's", "Master's"],
  "maritalStatus": ["never-married"],
  "limit": 10,
  "skip": 0
}

### 9. Upload Profile Photo
POST {{baseUrl}}/profiles/photos
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="photo"; filename="profile.jpg"
Content-Type: image/jpeg

< ./path/to/profile.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="isPrimary"

true
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==========================================
### MATCH ENDPOINTS
### ==========================================

### 10. Get Matches - All
GET {{baseUrl}}/matches?type=all&skip=0&limit=10
Authorization: Bearer {{token}}

### 11. Get Matches - Premium
GET {{baseUrl}}/matches?type=premium&skip=0&limit=10
Authorization: Bearer {{token}}

### 12. Get Matches - New
GET {{baseUrl}}/matches?type=new&skip=0&limit=10
Authorization: Bearer {{token}}

### 13. Get Matches - Recommended
GET {{baseUrl}}/matches?type=recommended&skip=0&limit=10
Authorization: Bearer {{token}}

### ==========================================
### INTEREST ENDPOINTS
### ==========================================

### 14. Send Interest
POST {{baseUrl}}/interests
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "receiverId": "65abc123def456ghi789jklm",
  "message": "Hi, I found your profile interesting. Would like to connect."
}

### 15. Get Interests - Received & Pending
GET {{baseUrl}}/interests?type=received&status=pending
Authorization: Bearer {{token}}

### 16. Get Interests - Sent
GET {{baseUrl}}/interests?type=sent
Authorization: Bearer {{token}}

### 17. Get Interests - Received & Accepted
GET {{baseUrl}}/interests?type=received&status=accepted
Authorization: Bearer {{token}}

### 18. Respond to Interest - Accept
PUT {{baseUrl}}/interests/65abc123def456ghi789jklm
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "accepted"
}

### 19. Respond to Interest - Reject
PUT {{baseUrl}}/interests/65abc123def456ghi789jklm
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "rejected"
}

### ==========================================
### PROFILE VIEW ENDPOINTS
### ==========================================

### 20. Track Profile View
POST {{baseUrl}}/profile-views
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "profileId": "65abc123def456ghi789jklm"
}

### 21. Get Profile Viewers
GET {{baseUrl}}/profile-views?skip=0&limit=20
Authorization: Bearer {{token}}

### ==========================================
### NOTIFICATION ENDPOINTS
### ==========================================

### 22. Get All Notifications
GET {{baseUrl}}/notifications?skip=0&limit=20
Authorization: Bearer {{token}}

### 23. Get Unread Notifications
GET {{baseUrl}}/notifications?unread=true&skip=0&limit=20
Authorization: Bearer {{token}}

### 24. Mark Notification as Read
PUT {{baseUrl}}/notifications/65abc123def456ghi789jklm/read
Authorization: Bearer {{token}}

### 25. Mark All Notifications as Read
PUT {{baseUrl}}/notifications/read-all
Authorization: Bearer {{token}}

### ==========================================
### SETTINGS ENDPOINTS
### ==========================================

### 26. Get Settings
GET {{baseUrl}}/settings
Authorization: Bearer {{token}}

### 27. Update Settings
PUT {{baseUrl}}/settings
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "notifications": {
    "newMatches": true,
    "profileViews": true,
    "interests": true,
    "email": false,
    "sms": false
  },
  "showLastSeen": true
}

### ==========================================
### DASHBOARD ENDPOINTS
### ==========================================

### 28. Get Dashboard Stats
GET {{baseUrl}}/dashboard/stats
Authorization: Bearer {{token}}

### ==========================================
### TEST SCENARIOS
### ==========================================

### Complete User Journey Test

# Step 1: Register
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Test User",
  "email": "test@example.com",
  "password": "test123",
  "gender": "male",
  "profileFor": "self"
}

###

# Step 2: Login (Copy token from response)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "test123"
}

###

# Step 3: Update Profile
PUT {{baseUrl}}/profiles/me
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "dateOfBirth": "1995-01-01",
  "phone": "+919876543210",
  "height": "5.8",
  "religion": "Hindu",
  "motherTongue": "Hindi",
  "maritalStatus": "never-married",
  "education": "Bachelor's",
  "occupation": "Engineer",
  "country": "India",
  "state": "Maharashtra",
  "city": "Mumbai"
}

###

# Step 4: Search Profiles
POST {{baseUrl}}/profiles/search
Content-Type: application/json

{
  "gender": "female",
  "ageRange": { "min": 25, "max": 30 },
  "city": "Mumbai",
  "limit": 5,
  "skip": 0
}

###

# Step 5: Get Dashboard Stats
GET {{baseUrl}}/dashboard/stats
Authorization: Bearer {{token}}

### ==========================================
### ERROR TESTING
### ==========================================

### Test Invalid Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "wrong@example.com",
  "password": "wrongpassword"
}

###

### Test Unauthorized Access
GET {{baseUrl}}/profiles/me

###

### Test Invalid Token
GET {{baseUrl}}/profiles/me
Authorization: Bearer invalid_token_here

###

### Test Invalid Profile ID
GET {{baseUrl}}/profiles/invalid_id_format
Authorization: Bearer {{token}}

###

### Test Duplicate Registration
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "password": "password123",
  "gender": "male"
}

### ==========================================
### BULK TESTING
### ==========================================

### Register Multiple Users for Testing
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Alice Smith",
  "email": "alice@example.com",
  "password": "alice123",
  "gender": "female",
  "profileFor": "self"
}

###

POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Bob Johnson",
  "email": "bob@example.com",
  "password": "bob123",
  "gender": "male",
  "profileFor": "self"
}

###

POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Carol Williams",
  "email": "carol@example.com",
  "password": "carol123",
  "gender": "female",
  "profileFor": "self"
}
